var St=Object.defineProperty;var it=s=>{throw TypeError(s)};var wt=(s,t,e)=>t in s?St(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var nt=(s,t,e)=>wt(s,typeof t!="symbol"?t+"":t,e),Pt=(s,t,e)=>t.has(s)||it("Cannot "+e);var Y=(s,t,e)=>t.has(s)?it("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e);var Q=(s,t,e)=>(Pt(s,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();const _t="modulepreload",Et=function(s,t){return new URL(s,t).href},at={},ht=function(t,e,i){let n=Promise.resolve();if(e&&e.length>0){let r=function(m){return Promise.all(m.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const l=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),y=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));n=r(e.map(m=>{if(m=Et(m,i),m in at)return;at[m]=!0;const u=m.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!i)for(let B=l.length-1;B>=0;B--){const P=l[B];if(P.href===m&&(!u||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${h}`))return;const L=document.createElement("link");if(L.rel=u?"stylesheet":_t,u||(L.as="script"),L.crossOrigin="",L.href=m,y&&L.setAttribute("nonce",y),document.head.appendChild(L),u)return new Promise((B,P)=>{L.addEventListener("load",B),L.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return n.then(r=>{for(const l of r||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var F;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(F||(F={}));class Z extends Error{constructor(t,e,i){super(t),this.message=t,this.code=e,this.data=i}}const bt=s=>{var t,e;return s!=null&&s.androidBridge?"android":!((e=(t=s==null?void 0:s.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||e===void 0)&&e.bridge?"ios":"web"},Bt=s=>{const t=s.CapacitorCustomPlatform||null,e=s.Capacitor||{},i=e.Plugins=e.Plugins||{},n=()=>t!==null?t.name:bt(s),a=()=>n()!=="web",r=u=>{const h=y.get(u);return!!(h!=null&&h.platforms.has(n())||l(u))},l=u=>{var h;return(h=e.PluginHeaders)===null||h===void 0?void 0:h.find(O=>O.name===u)},d=u=>s.console.error(u),y=new Map,m=(u,h={})=>{const O=y.get(u);if(O)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),O.proxy;const L=n(),B=l(u);let P;const mt=async()=>(!P&&L in h?P=typeof h[L]=="function"?P=await h[L]():P=h[L]:t!==null&&!P&&"web"in h&&(P=typeof h.web=="function"?P=await h.web():P=h.web),P),vt=(S,_)=>{var C,k;if(B){const q=B==null?void 0:B.methods.find(I=>_===I.name);if(q)return q.rtype==="promise"?I=>e.nativePromise(u,_.toString(),I):(I,R)=>e.nativeCallback(u,_.toString(),I,R);if(S)return(C=S[_])===null||C===void 0?void 0:C.bind(S)}else{if(S)return(k=S[_])===null||k===void 0?void 0:k.bind(S);throw new Z(`"${u}" plugin is not implemented on ${L}`,F.Unimplemented)}},z=S=>{let _;const C=(...k)=>{const q=mt().then(I=>{const R=vt(I,S);if(R){const W=R(...k);return _=W==null?void 0:W.remove,W}else throw new Z(`"${u}.${S}()" is not implemented on ${L}`,F.Unimplemented)});return S==="addListener"&&(q.remove=async()=>_()),q};return C.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:S,writable:!1,configurable:!1}),C},et=z("addListener"),st=z("removeListener"),Lt=(S,_)=>{const C=et({eventName:S},_),k=async()=>{const I=await C;st({eventName:S,callbackId:I},_)},q=new Promise(I=>C.then(()=>I({remove:k})));return q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},q},X=new Proxy({},{get(S,_){switch(_){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return B?Lt:et;case"removeListener":return st;default:return z(_)}}});return i[u]=X,y.set(u,{name:u,proxy:X,platforms:new Set([...Object.keys(h),...B?[L]:[]])}),X};return e.convertFileSrc||(e.convertFileSrc=u=>u),e.getPlatform=n,e.handleError=d,e.isNativePlatform=a,e.isPluginAvailable=r,e.registerPlugin=m,e.Exception=Z,e.DEBUG=!!e.DEBUG,e.isLoggingEnabled=!!e.isLoggingEnabled,e},It=s=>s.Capacitor=Bt(s),tt=It(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),J=tt.registerPlugin;class yt{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,e){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(e);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),i&&this.sendRetainedArgumentsForEvent(t);const r=async()=>this.removeListener(t,e);return Promise.resolve({remove:r})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,e,i){const n=this.listeners[t];if(!n){if(i){let a=this.retainedEventArguments[t];a||(a=[]),a.push(e),this.retainedEventArguments[t]=a}return}n.forEach(a=>a(e))}hasListeners(t){var e;return!!(!((e=this.listeners[t])===null||e===void 0)&&e.length)}registerWindowListener(t,e){this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:i=>{this.notifyListeners(e,i)}}}unimplemented(t="not implemented"){return new tt.Exception(t,F.Unimplemented)}unavailable(t="not available"){return new tt.Exception(t,F.Unavailable)}async removeListener(t,e){const i=this.listeners[t];if(!i)return;const n=i.indexOf(e);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const e=this.retainedEventArguments[t];e&&(delete this.retainedEventArguments[t],e.forEach(i=>{this.notifyListeners(t,i)}))}}const rt=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),lt=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ct extends yt{async getCookies(){const t=document.cookie,e={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[n,a]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=lt(n).trim(),a=lt(a).trim(),e[n]=a}),e}async setCookie(t){try{const e=rt(t.key),i=rt(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),r=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${i||""}${n}; path=${a}; ${r};`}catch(e){return Promise.reject(e)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}J("CapacitorCookies",{web:()=>new Ct});const Tt=async s=>new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{const n=i.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},i.onerror=n=>e(n),i.readAsDataURL(s)}),xt=(s={})=>{const t=Object.keys(s);return Object.keys(s).map(n=>n.toLocaleLowerCase()).reduce((n,a,r)=>(n[a]=s[t[r]],n),{})},kt=(s,t=!0)=>s?Object.entries(s).reduce((i,n)=>{const[a,r]=n;let l,d;return Array.isArray(r)?(d="",r.forEach(y=>{l=t?encodeURIComponent(y):y,d+=`${a}=${l}&`}),d.slice(0,-1)):(l=t?encodeURIComponent(r):r,d=`${a}=${l}`),`${i}&${d}`},"").substr(1):null,qt=(s,t={})=>{const e=Object.assign({method:s.method||"GET",headers:s.headers},t),n=xt(s.headers)["content-type"]||"";if(typeof s.data=="string")e.body=s.data;else if(n.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[r,l]of Object.entries(s.data||{}))a.set(r,l);e.body=a.toString()}else if(n.includes("multipart/form-data")||s.data instanceof FormData){const a=new FormData;if(s.data instanceof FormData)s.data.forEach((l,d)=>{a.append(d,l)});else for(const l of Object.keys(s.data))a.append(l,s.data[l]);e.body=a;const r=new Headers(e.headers);r.delete("content-type"),e.headers=r}else(n.includes("application/json")||typeof s.data=="object")&&(e.body=JSON.stringify(s.data));return e};class At extends yt{async request(t){const e=qt(t,t.webFetchExtra),i=kt(t.params,t.shouldEncodeUrlParams),n=i?`${t.url}?${i}`:t.url,a=await fetch(n,e),r=a.headers.get("content-type")||"";let{responseType:l="text"}=a.ok?t:{};r.includes("application/json")&&(l="json");let d,y;switch(l){case"arraybuffer":case"blob":y=await a.blob(),d=await Tt(y);break;case"json":d=await a.json();break;case"document":case"text":default:d=await a.text()}const m={};return a.headers.forEach((u,h)=>{m[h]=u}),{data:d,headers:m,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}J("CapacitorHttp",{web:()=>new At});function $t(s){s.CapacitorUtils.Synapse=new Proxy({},{get(t,e){return new Proxy({},{get(i,n){return(a,r,l)=>{const d=s.Capacitor.Plugins[e];if(d===void 0){l(new Error(`Capacitor plugin ${e} not found`));return}if(typeof d[n]!="function"){l(new Error(`Method ${n} not found in Capacitor plugin ${e}`));return}(async()=>{try{const y=await d[n](a);r(y)}catch(y){l(y)}})()}}})}})}function Ut(s){s.CapacitorUtils.Synapse=new Proxy({},{get(t,e){return s.cordova.plugins[e]}})}function Mt(s=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!s?$t(window):window.cordova!==void 0&&Ut(window))}var A;(function(s){s.Documents="DOCUMENTS",s.Data="DATA",s.Library="LIBRARY",s.Cache="CACHE",s.External="EXTERNAL",s.ExternalStorage="EXTERNAL_STORAGE",s.ExternalCache="EXTERNAL_CACHE",s.LibraryNoCloud="LIBRARY_NO_CLOUD",s.Temporary="TEMPORARY"})(A||(A={}));var ot;(function(s){s.UTF8="utf8",s.ASCII="ascii",s.UTF16="utf16"})(ot||(ot={}));const D=J("Filesystem",{web:()=>ht(()=>import("./web-CcvGCN6B.js"),[],import.meta.url).then(s=>new s.FilesystemWeb)});Mt();const j=J("Preferences",{web:()=>ht(()=>import("./web-D7Yx_hMh.js"),[],import.meta.url).then(s=>new s.PreferencesWeb)});class Dt{constructor(){this.songsKey="importedSongs",this.onFileImport=null,this.onFileDelete=null}async loadSongs(){const t=await j.get({key:this.songsKey}),e=t.value?JSON.parse(t.value):[];return e.sort((i,n)=>i.title.localeCompare(n.title,"ja")),e}async saveSongs(t){await j.set({key:this.songsKey,value:JSON.stringify(t)})}async importSong(t){if(!t.type.startsWith("audio/"))return null;const e=await t.arrayBuffer(),i=this.arrayBufferToBase64(e),n=t.name.replace(/\.mp3$/i,""),a=await this.getAudioDurationFromBase64(i),r=`music/${t.name}`;try{await D.mkdir({path:"music",directory:A.Data,recursive:!0})}catch(y){console.log("music „Éá„Ç£„É¨„ÇØ„Éà„É™‰ΩúÊàê„Çπ„Ç≠„ÉÉ„Éó:",y.message)}const l=await this.loadSongs(),d=l.findIndex(y=>y.title===n);try{await D.writeFile({path:r,data:i,directory:A.Data})}catch(y){throw console.error("üéµ „Éï„Ç°„Ç§„É´Êõ∏„ÅçËæº„Åø„Ç®„É©„Éº:",y),y}return d!==-1?l[d]={title:n,duration:a,path:r}:l.push({title:n,duration:a,path:r}),l.sort((y,m)=>y.title.localeCompare(m.title,"ja")),await this.saveSongs(l),this.onFileImport&&this.onFileImport(),{title:n,duration:a,path:r}}getAudioDurationFromBase64(t){return new Promise((e,i)=>{const n=new Audio(`data:audio/mp3;base64,${t}`);n.addEventListener("loadedmetadata",()=>e(n.duration)),n.addEventListener("error",a=>i(a))})}async deleteSong(t){try{await D.deleteFile({path:t,directory:A.Data});const i=(await this.loadSongs()).filter(a=>a.path!==t);await this.saveSongs(i);const n=t.split("/").pop();return this.onFileDelete&&this.onFileDelete(t,n),!0}catch(e){return console.error("ÂâäÈô§„Å´Â§±Êïó:",e),!1}}async readFileAsBase64(t){const{data:e}=await D.readFile({path:t,directory:A.Data});return e}arrayBufferToBase64(t){let e="";const i=new Uint8Array(t);for(let n=0;n<i.byteLength;n++)e+=String.fromCharCode(i[n]);return btoa(e)}}function ct(s){s.classList.add("active")}function dt(s){s.classList.remove("active")}function Ft(s){s.style.opacity="1",s.style.pointerEvents="auto"}function Ht(s){s.style.opacity="0.1",s.style.pointerEvents="none"}function T(s){if(isNaN(s)||s<0)return"0:00";const t=Math.floor(s/3600),e=Math.floor(s%3600/60),i=Math.floor(s%60),n=String(e).padStart(2,"0"),a=String(i).padStart(2,"0");return t>0?`${t}:${n}:${a}`:`${e}:${a}`}function Ot(s){let t=0;return s.forEach(e=>{t+=e.duration}),t}function V(s,t){return s.findIndex(e=>e.title===t)}function Rt(s,t){const e=new Set(t.map(i=>i.path));return s.filter(i=>!e.has(i.path))}function Wt(s){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=e,i.readAsDataURL(s)})}class N{constructor(){this.root=document.querySelector(".Notification"),this.textarea=this.root.querySelector(".Notification__textarea")}notify(t,e){this.init(),this.textarea.innerText=t,this.type(e),this.show()}type(t){switch(t){case"normal":this.root.classList.add("-normal");break;case"error":this.root.classList.add("-error");break;default:this.root.classList.add("-normal")}}show(){this.root.classList.add("-active"),setTimeout(()=>{this.root.classList.remove("-active")},2500)}init(){this.root.classList.forEach(t=>{t!=="Notification"&&this.root.classList.remove(t)})}}const jt=new N;var K,pt;class Vt{constructor(t){Y(this,K);this.audio=t,this.setList=[],this.currentPlaylistId=null,this.currentIndex=null,this.currentSongTitle=null,this.isReady=!1,this.onPlay=null,this.onPause=null,this.onLoaded=null,this.canPlay=null,this.onTimeUpdate=null,this.onEnded=null,Q(this,K,pt).call(this)}setPlaylist(t){this.currentPlaylistId=t.id,this.setSetList(t.songs)}unsetPlaylist(){this.currentPlaylistId=null}setSetList(t){this.setList=t}play(){this.isReady&&this.audio.play()}pause(){this.audio.pause()}togglePlay(){this.audio.paused?this.play():this.pause()}async next(){this.currentIndex=V(this.setList,this.currentSongTitle),this.currentIndex<this.setList.length-1?(this.currentIndex++,await this.loadCurrentTrack()):(this.currentIndex=0,await this.loadCurrentTrack())}async previous(){this.currentIndex=V(this.setList,this.currentSongTitle),this.currentIndex>0?(this.currentIndex--,await this.loadCurrentTrack()):(this.currentIndex=this.setList.length-1,await this.loadCurrentTrack())}seek(t){this.audio.currentTime=t}async loadCurrentTrack(){const t=this.setList[this.currentIndex];if(!t)return;try{await D.stat({path:t.path,directory:A.Data})}catch{const i=t.path.split("/").pop();jt.notify(`${i}„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì`,"error"),this.currentIndex=null;return}const{data:e}=await D.readFile({path:t.path,directory:A.Data});this.currentSongTitle=t.title,this.audio.src=`data:audio/mp3;base64,${e}`,this.audio.load()}async playTrack(t){this.currentIndex=t,await this.loadCurrentTrack()}getCurrentTrack(){return this.setList[this.currentIndex]||null}getProgress(){return this.audio.duration?this.audio.currentTime/this.audio.duration*100:0}}K=new WeakSet,pt=function(){this.audio.addEventListener("loadedmetadata",()=>{this.isReady=!0,this.onLoaded&&this.onLoaded()}),this.audio.addEventListener("loadeddata",()=>{this.canPlay&&this.canPlay()}),this.audio.addEventListener("play",()=>{this.onPlay&&this.onPlay()}),this.audio.addEventListener("pause",()=>{this.onPause&&this.onPause()}),this.audio.addEventListener("timeupdate",()=>{this.onTimeUpdate&&this.onTimeUpdate(this.audio.currentTime,this.audio.duration)}),this.audio.addEventListener("ended",()=>{this.onEnded&&this.onEnded()})};var G,gt;class Kt{constructor(t){Y(this,G);this.storage=t,this.playlistsKey="playlists",this.playlists=[]}async loadPlaylists(){const t=await j.get({key:this.playlistsKey});return this.playlists=t.value?JSON.parse(t.value):[],this.playlists}async savePlaylists(){await j.set({key:this.playlistsKey,value:JSON.stringify(this.playlists)})}async createPlaylist(t){const e={id:crypto.randomUUID(),name:t,imgBase64Data:null,songs:[]};return this.playlists.push(e),await this.savePlaylists(),e}async deletePlaylist(t){this.playlists=this.playlists.filter(e=>e.id!==t),await this.savePlaylists()}async renamePlaylist(t,e){const i=this.playlists.find(n=>n.id===t);i&&(i.name=e,await this.savePlaylists())}async setSongs(t,e){const i=this.playlists.find(n=>n.id===t);i&&(i.songs=e,await this.savePlaylists())}async setImage(t,e){const i=this.playlists.find(a=>a.id===t),n=await Q(this,G,gt).call(this,e);i&&(i.imgBase64Data=n,await this.savePlaylists())}async addSongToPlaylist(t,e){const i=this.playlists.find(n=>n.id===t);i&&(i.songs.includes(e)||(i.songs.push(e),await this.savePlaylists()))}async removeSongFromPlaylist(t,e){const i=this.playlists.find(n=>n.id===t);i&&(i.songs=i.songs.filter(n=>n.title!==e),await this.savePlaylists())}async getSongsInPlaylist(t){const e=this.playlists.find(n=>n.id===t);return e?(await this.storage.loadSongs()).filter(n=>e.songs.includes(n.path)):[]}getPlaylist(t){return this.playlists.find(e=>e.id===t)||null}getAllPlaylists(){return this.playlists}}G=new WeakSet,gt=function(t){return new Promise((e,i)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=i,n.readAsDataURL(t)})};class Gt{constructor(){nt(this,"waitInput",()=>new Promise(t=>{this.actions.addEventListener("click",e=>{t(e.target.value)})}));this.backdrop=document.querySelector(".ActionSheetBackdrop"),this.sheet=document.querySelector(".ActionSheet"),this.actions=this.sheet.querySelector(".ActionSheet__actions"),this.cancelBtn=this.sheet.querySelector(".ActionSheet__cancel"),this.backdrop.addEventListener("click",()=>{this.sheet.classList.remove("-opened"),this.backdrop.classList.remove("-opened")})}async action(t,e){return this.actions.innerHTML="",t&&this.setHeaderText(t),this.generateBtns(e),this.open(),await this.waitInput()}setHeaderText(t){const e=document.createElement("p");e.classList.add("ActionSheet__header-text"),e.textContent=t,e.addEventListener("click",i=>{i.stopPropagation()}),this.actions.appendChild(e)}generateBtns(t){t.forEach(e=>{const i=document.createElement("button");i.classList.add("ActionSheet__btn","ActionSheet__action"),e.type==="danger"&&i.classList.add("-danger"),i.textContent=e.text,i.value=e.value,this.actions.appendChild(i)})}open(){this.backdrop.classList.add("-opened"),this.sheet.classList.add("-opened")}close(){this.backdrop.classList.remove("-opened"),this.sheet.classList.remove("-opened")}}class H{constructor(t){this.root=t}show(){this.root.classList.add("active")}hide(){this.root.classList.remove("active")}}class Jt extends H{constructor(t){super(t),this.deleteModeBtn=t.querySelector(".Header__btn.-delete-mode"),this.importBtn=t.querySelector("#import-btn"),this.importTrigger=t.querySelector("#import-trigger"),this.importPopoverPanel=t.querySelector(".PopoverList__panel"),this.fileInput=t.querySelector("#file-input"),this.searchInput=t.querySelector(".SearchBox__input"),this.searchClearBtn=t.querySelector(".SearchBox__clear-btn"),this.songList=t.querySelector(".song-list"),this.isDeleteMode=!1}toggleDeleteMode(){this.isDeleteMode=!this.isDeleteMode,this.showDeleteBtn()}showDeleteBtn(){const t=this.root.querySelectorAll(".song-list__delete-btn");this.isDeleteMode?(Ht(this.importBtn),ct(this.deleteModeBtn),t.forEach(e=>{ct(e)})):(Ft(this.importBtn),dt(this.deleteModeBtn),t.forEach(e=>{dt(e)}))}getSearchValue(){return this.searchInput.value}clearSearchValue(){this.searchInput.value=""}async renderSongList(t,e){this.songList.innerHTML="",t.forEach(i=>{this.renderSong(i,e)})}renderSong(t,e){const i=Array.from(this.songList.querySelectorAll("li")),n=document.createElement("li");n.classList.add("song-list__item"),n.innerHTML=`
            <button class="song-list__delete-btn"><i class="fa-solid fa-circle-minus"></i></button>
            <i class="song-list__icon fa-solid fa-music"></i>
            <div class="song-list__info">
                <p class="song-list__title">${t.title}</p>
                <p class="song-list__length">${T(t.duration)}</p>
            </div>
            <div class="wave">
                <span></span><span></span><span></span><span></span>
            </div>
        `,n.dataset.title=t.title,n.querySelector(".song-list__delete-btn").addEventListener("click",async r=>{r.stopPropagation(),await e.deleteSong(t.path),n.classList.add("-deleted"),setTimeout(()=>{n.remove()},200)});let a=!1;for(const r of i)if(t.title.localeCompare(r.querySelector(".song-list__title").textContent,"ja")<0){this.songList.insertBefore(n,r),a=!0;break}a||this.songList.appendChild(n)}filterList(t){const e=t.toLowerCase();this.songList.querySelectorAll("li").forEach(n=>{n.dataset.title.toLowerCase().includes(e)?n.style.display="":n.style.display="none"})}highlightPlayingSong(t){if(!t)return;const e=this.songList.querySelector(".song-list__item.-playing"),i=this.songList.querySelector('[data-title="'+t+'"]');e&&e.classList.remove("-playing"),i&&i.classList.add("-playing")}startWave(){this.root.querySelectorAll(".wave span").forEach(e=>{e.style.animationPlayState="running"})}stopWave(){this.root.querySelectorAll(".wave span").forEach(e=>{e.style.animationPlayState="paused"})}}class Nt{constructor(){this.root=document.querySelector(".MiniPlayer"),this.songTitle=this.root.querySelector(".MiniPlayer__song-title"),this.songLength=this.root.querySelector(".MiniPlayer__song-length"),this.playBtn=this.root.querySelector(".MiniPlayer__play-btn")}setup(t){this.songTitle.textContent=t.title,this.songLength.textContent=T(t.duration),this.autoScrollText(this.songTitle)}setPlayBtn(){this.playBtn.innerHTML='<i class="fa-solid fa-play"></i>'}setPauseBtn(){this.playBtn.innerHTML='<i class="fa-solid fa-pause"></i>'}show(){this.root.classList.add("-active")}hide(){this.root.classList.remove("-active")}autoScrollText(t,e=.4,i=3e3){if(t.scrollWidth<=t.clientWidth)return;let n=1,a=t.scrollLeft,r=!1;function l(){if(!r&&(a+=n*e,t.scrollLeft=a,a+t.clientWidth>=t.scrollWidth||a<=0)){r=!0,n*=-1,setTimeout(()=>{r=!1,requestAnimationFrame(l)},i);return}requestAnimationFrame(l)}setTimeout(()=>l(),i)}}class zt{constructor(t,e){this.audio=document.getElementById("audio"),this.ctx=t.getContext("2d"),this.barColor=getComputedStyle(document.documentElement).getPropertyValue("--main-color"),this.WIDTH=t.width,this.HEIGHT=t.height,this.audioCtx,this.analyser,this.source,this.dataArray,this.rafId,this.flashTarget=e,this.flashIntensity=0,this.audio.addEventListener("play",()=>{this.audioCtx||this.setupAudio(),this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.draw()}),this.audio.addEventListener("pause",()=>cancelAnimationFrame(this.rafId))}setupAudio(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.analyser.fftSize=256,this.analyser.smoothingTimeConstant=.7;const t=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(t),this.source=this.audioCtx.createMediaElementSource(this.audio),this.source.connect(this.analyser),this.analyser.connect(this.audioCtx.destination)}draw(){if(this.analyser.getByteFrequencyData(this.dataArray),this.flashTarget){const n=this.dataArray.reduce((l,d)=>l+d,0)/this.dataArray.length/255,a=Math.pow(n,3.1);this.flashIntensity+=(a-this.flashIntensity)*.2;const r=Math.floor(this.flashIntensity*1500);this.flashTarget.style.boxShadow=`0 0 ${r}px rgb(${this.barColor})`}this.ctx.clearRect(0,0,this.WIDTH,this.HEIGHT);const t=64,e=this.WIDTH/t;for(let i=0;i<t;i++){const n=this.dataArray[i]/255,a=Math.pow(n,2.5),r=i/(t-1),l=1.2-Math.pow((r-.5)*2,2),d=1+r*.8,y=a*(this.HEIGHT*.8)*l*d,m=i*e,u=this.HEIGHT-y,h=this.ctx.createLinearGradient(0,0,0,this.HEIGHT);h.addColorStop(0,"#ffffff"),h.addColorStop(.5,"#ffffff"),h.addColorStop(1,`rgb(${this.barColor})`),this.ctx.fillStyle=h,this.ctx.fillRect(m,u,e-2,y)}this.rafId=requestAnimationFrame(()=>this.draw())}}class Xt{constructor(){this.root=document.querySelector(".FullPlayer"),this.closeBtn=this.root.querySelector(".FullPlayer__close-btn"),this.Record=this.root.querySelector(".FullPlayer__record"),this.songTitleElem=this.root.querySelector(".FullPlayer__song-title"),this.currentTimeElem=this.root.querySelector(".FullPlayer__current-time"),this.remainingTimeElem=this.root.querySelector(".FullPlayer__remaining-time"),this.progressBar=this.root.querySelector(".FullPlayer__progress-bar"),this.prevBtn=this.root.querySelector(".FullPlayer__prev-btn"),this.playBtn=this.root.querySelector(".FullPlayer__play-btn"),this.nextBtn=this.root.querySelector(".FullPlayer__next-btn"),this.visualCanvas=this.root.querySelector("#vCanvas"),this.audioVisualizer=new zt(this.visualCanvas,this.Record),this.isDragging=!1}setup(t){this.songTitleElem.textContent=t.title,this.currentTimeElem.textContent="0:00",this.remainingTimeElem.textContent=T(t.duration),this.progressBar.max=t.duration}update(t,e){this.isDragging||(this.currentTimeElem.textContent=T(t),this.remainingTimeElem.textContent=T(e-t),this.setProgressValue(t))}updateWhileDragging(){this.currentTimeElem.textContent=T(this.getProgressValue()),this.remainingTimeElem.textContent=T(this.progressBar.max-this.getProgressValue())}getProgressValue(){return this.progressBar.value}setProgressValue(t){this.progressBar.value=t,this.updateProgressColor()}updateProgressColor(){const t=this.progressBar.value/this.progressBar.max*100||0;this.progressBar.style.background=`linear-gradient(to right, rgb(var(--main-color)) 0%, rgb(var(--white)) ${t}%, rgb(var(--dark-gray)) ${t}%)`}expansion(){this.progressBar.style.transform="scale(1.03)",this.currentTimeElem.style.transform="scale(1.2)",this.remainingTimeElem.style.transform="scale(1.2)"}reduction(){this.progressBar.style.transform="scale(1.0)",this.currentTimeElem.style.transform="scale(1.0)",this.remainingTimeElem.style.transform="scale(1.0)"}setPlayBtn(){this.playBtn.innerHTML='<i class="fa-solid fa-play"></i>'}setPauseBtn(){this.playBtn.innerHTML='<i class="fa-solid fa-pause"></i>'}startRecordAnimation(){this.Record.style.animationPlayState="running"}stopRecordAnimation(){this.Record.style.animationPlayState="paused"}open(){this.root.classList.add("-opened")}close(){this.root.classList.remove("-opened")}}class Yt extends H{constructor(t){super(t),this.modalOpenBtn=t.querySelector("#modal-open-btn"),this.playlistList=t.querySelector(".playlist-list")}renderPlaylists(t){this.playlistList.innerHTML="",t.forEach(e=>{const i=document.createElement("li");i.innerHTML=`
                <div class="playlist-list__img-area">
                    <img class="playlist-list__img" src="${e.imgBase64Data}">
                </div>
                <p class="playlist-list__name">${e.name}</p>
            `,i.dataset.id=e.id,this.playlistList.appendChild(i)})}}class Qt{constructor(){this.root=document.querySelector(".Modal"),this.closeBtn=this.root.querySelector(".Modal__close-btn"),this.input=this.root.querySelector(".Modal__input"),this.createBtn=this.root.querySelector(".Modal__create-btn")}open(){this.root.classList.add("-open"),this.input.focus()}close(){this.root.classList.remove("-open"),this.input.value=""}activateCreateBtn(){this.createBtn.classList.add("-active")}deactivateCreateBtn(){this.createBtn.classList.remove("-active")}}class Zt extends H{constructor(t){super(t),this.backBtn=t.querySelector(".playlist-detail__back-btn"),this.header=t.querySelector(".playlist-detail__header"),this.headerTitle=t.querySelector(".playlist-detail__header .playlist-detail__title"),this.ellipsisBtn=t.querySelector("#playlist-detail__popover .PopoverList__btn"),this.popoverPanel=t.querySelector("#playlist-detail__popover .PopoverList__panel"),this.deleteBtn=t.querySelector("#playlist-detail__delete-btn"),this.img=t.querySelector(".playlist-detail__img"),this.length=t.querySelector(".playlist-detail__length"),this.title=t.querySelector(".playlist-detail__info .playlist-detail__title"),this.addBtn=t.querySelector(".playlist-detail__action--add"),this.editBtn=t.querySelector(".playlist-detail__action--edit"),this.infoBtn=t.querySelector(".playlist-detail__action--info"),this.playBtn=t.querySelector(".playlist-detail__play-btn"),this.songList=t.querySelector(".song-list")}async init(t){await this.load(t),this.renderSongList(t.songs)}async load(t){this.root.dataset.id=t.id,this.headerTitle.textContent=t.name,this.img.src=t.imgBase64Data,this.title.textContent=t.name,this.totalSongDuration=Ot(t.songs),this.length.textContent=`${t.songs.length}Êõ≤„ÄÅ ${this.formatDuration(this.totalSongDuration)}`}renderSongList(t){this.songList.innerHTML="",t.forEach(e=>{const i=document.createElement("li");i.classList.add("song-list__item"),i.innerHTML=`
                <i class="song-list__icon fa-solid fa-music"></i>
                <div class="song-list__info">
                    <p class="song-list__title">${e.title}</p>
                    <p class="song-list__length">${T(e.duration)}</p>
                </div>
                <div class="wave">
                    <span></span><span></span><span></span><span></span>
                </div>
            `,i.dataset.title=e.title,this.songList.appendChild(i)})}highlightPlayingSong(t){if(!t)return;const e=this.songList.querySelector(".song-list__item.-playing"),i=this.songList.querySelector('[data-title="'+t+'"]');e&&e.classList.remove("-playing"),i&&i.classList.add("-playing")}setPlayBtn(){this.playBtn.innerHTML='<i class="fa-solid fa-circle-play"></i>'}setPauseBtn(){this.playBtn.innerHTML='<i class="fa-solid fa-circle-pause"></i>'}formatDuration(t){if(isNaN(t))return null;const e=Math.floor(t),i=Math.floor(e/3600),n=Math.floor(e%3600/60);return i===0?`${n}ÂàÜ`:`${i}ÊôÇÈñì${n}ÂàÜ`}loadingPlaylistId(){return this.root.dataset.id}startWave(){this.root.querySelectorAll(".wave span").forEach(e=>{e.style.animationPlayState="running"})}stopWave(){this.root.querySelectorAll(".wave span").forEach(e=>{e.style.animationPlayState="paused"})}}const te=new N;class ee extends H{constructor(t){super(t),this.closeBtn=t.querySelector(".bottom-sheet__close-btn"),this.searchInput=t.querySelector(".SearchBox__input"),this.searchClearBtn=t.querySelector(".SearchBox__clear-btn"),this.songList=t.querySelector(".song-list")}renderSongs(t,e){this.songList.innerHTML="",t.forEach(i=>{const n=document.createElement("li");n.classList.add("song-list__item"),n.innerHTML=`
                <i class="song-list__icon fa-solid fa-music"></i>
                <div class="song-list__info">
                    <p class="song-list__title">${i.title}</p>
                    <p class="song-list__length">${T(i.duration)}</p>
                </div>
                <button class="song-list__add-btn"><i class="fa-solid fa-plus"></i></button>
            `,n.dataset.title=i.title,n.querySelector(".song-list__add-btn").addEventListener("click",async()=>{const a=document.getElementById("playlist-detail").dataset.id;n.classList.add("added"),setTimeout(()=>n.remove(),250),await e.addSongToPlaylist(a,i),te.notify(`„Äå${i.title}„Äç„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü`,"normal")}),this.songList.appendChild(n)})}filterList(t){const e=t.toLowerCase();this.songList.querySelectorAll("li").forEach(n=>{n.dataset.title.toLowerCase().includes(e)?n.style.display="":n.style.display="none"})}getSearchValue(){return this.searchInput.value}}const se=new N;class ie extends H{constructor(t){super(t),this.closeBtn=t.querySelector(".bottom-sheet__close-btn"),this.searchInput=t.querySelector(".SearchBox__input"),this.searchClearBtn=t.querySelector(".SearchBox__clear-btn"),this.songList=t.querySelector(".song-list")}renderSongs(t){this.songList.innerHTML="",t.forEach(e=>{const i=document.createElement("li");i.classList.add("song-list__item"),i.innerHTML=`
                <i class="song-list__icon drag-handler fa-solid fa-sort"></i>
                <div class="song-list__info">
                    <p class="song-list__title">${e.title}</p>
                    <p class="song-list__length">${T(e.duration)}</p>
                </div>
                <button class="song-list__remove-btn"><i class="fa-solid fa-circle-minus"></i></button>
            `,i.dataset.data=JSON.stringify(e),i.querySelector(".song-list__remove-btn").addEventListener("click",async()=>{i.classList.add("removed"),setTimeout(()=>i.remove(),250),se.notify(`„Äå${e.title}„Äç„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü`,"normal")}),this.songList.appendChild(i)})}returnSongList(){const t=[];return this.songList.querySelectorAll("li").forEach(i=>{const n=JSON.parse(i.dataset.data);t.push(n)}),t}filterList(t){const e=t.toLowerCase();this.songList.querySelectorAll("li").forEach(n=>{JSON.parse(n.dataset.data).title.toLowerCase().includes(e)?n.style.display="":n.style.display="none"})}getSearchValue(){return this.searchInput.value}}class ne extends H{constructor(t){super(t),this.closeBtn=t.querySelector(".bottom-sheet__close-btn"),this.saveBtn=t.querySelector(".bottom-sheet__action-btn"),this.img=t.querySelector(".info-edit__img"),this.cameraBtn=t.querySelector("#info-edit__camera-btn"),this.popoverPanel=t.querySelector(".PopoverList__panel"),this.imgInputTrigger=t.querySelector("#img-input-trigger"),this.imgInput=t.querySelector("#playlist-img-input"),this.nameInput=t.querySelector("#playlist-name-input")}setup(t){this.imgInput.value="",this.img.src=t.imgBase64Data,this.nameInput.value=t.name}getImgFile(){return this.imgInput.files[0]||null}}const c=new Vt(document.getElementById("audio")),U=new Dt,v=new Kt(U),ft=new Gt,ae=new N,p=new Jt(document.getElementById("all-songs")),$=new Nt,g=new Xt,M=new Yt(document.getElementById("playlist")),x=new Qt,o=new Zt(document.getElementById("playlist-detail")),E=new ee(document.getElementById("add-song-sheet")),w=new ie(document.getElementById("edit-playlist-sheet")),f=new ne(document.getElementById("info-edit-sheet")),ut=document.querySelectorAll(".TabBar__btn"),re=document.querySelectorAll(".tab-content");let b=[];c.canPlay=()=>{const s=c.getCurrentTrack();$.setup(s),g.setup(s),$.show()};c.onPlay=()=>{const s=o.loadingPlaylistId();c.currentPlaylistId===s&&o.setPauseBtn(),$.setPauseBtn(),g.setPauseBtn(),p.highlightPlayingSong(c.currentSongTitle),o.highlightPlayingSong(c.currentSongTitle),p.startWave(),o.startWave(),g.startRecordAnimation()};c.onPause=()=>{const s=o.loadingPlaylistId();c.currentPlaylistId===s&&o.setPlayBtn(),$.setPlayBtn(),g.setPlayBtn(),p.stopWave(),o.stopWave(),g.stopRecordAnimation()};c.onTimeUpdate=(s,t)=>{g.update(s,t)};c.onEnded=()=>{c.next()};U.onFileImport=()=>{};U.onFileDelete=async(s,t)=>{const e=b.findIndex(i=>i.path===s);b.splice(e,1),c.getCurrentTrack()&&c.currentPlaylistId===null&&c.setSetList(b),ae.notify(`${t}„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü`,"normal")};document.addEventListener("click",s=>{const t=s.target.closest(".PopoverList__btn"),e=document.querySelectorAll(".PopoverList__panel");t||e.forEach(i=>{i.classList.remove("-opened")})});p.deleteModeBtn.addEventListener("click",()=>{p.toggleDeleteMode()});p.importBtn.addEventListener("click",s=>{p.importPopoverPanel.classList.toggle("-opened")});p.importTrigger.addEventListener("click",()=>{p.fileInput.click()});p.fileInput.addEventListener("change",async s=>{const t=Array.from(s.target.files);for(const e of t){const i=await U.importSong(e),n=b.findIndex(a=>a.title===i.title);n!==-1?b[n]=i:(b.push(i),p.renderSong(i,U)),b.sort((a,r)=>a.title.localeCompare(r.title,"ja")),c.currentPlaylistId===null&&c.getCurrentTrack()&&c.setSetList(b)}p.fileInput.value=""});p.searchInput.addEventListener("input",()=>{const s=p.getSearchValue();p.filterList(s),s.trim()!==""?p.searchClearBtn.style.display="block":p.searchClearBtn.style.display="none"});p.searchClearBtn.addEventListener("click",()=>{p.searchInput.value="",p.searchInput.focus(),p.searchClearBtn.style.display="none",p.filterList("")});p.songList.addEventListener("click",s=>{const t=s.target.closest("li"),e=V(b,t.dataset.title);c.unsetPlaylist(),c.setSetList(b),t.dataset.title===c.currentSongTitle?c.togglePlay():c.playTrack(e)});M.modalOpenBtn.addEventListener("click",()=>{x.open()});M.playlistList.addEventListener("click",async s=>{const t=s.target.closest("li");if(!t)return;const e=t.dataset.id,i=v.getPlaylist(e);t&&M.playlistList.contains(t)&&(await o.init(i),o.highlightPlayingSong(c.currentSongTitle),o.show())});x.closeBtn.addEventListener("click",()=>{x.close()});x.input.addEventListener("input",()=>{x.input.value===""?x.deactivateCreateBtn():x.activateCreateBtn()});x.createBtn.addEventListener("click",async()=>{const s=x.input.value;v.createPlaylist(s),x.close();const t=await v.loadPlaylists();M.renderPlaylists(t)});o.backBtn.addEventListener("click",()=>{const s=v.getAllPlaylists();o.hide(),M.renderPlaylists(s),o.root.scrollTo(0,0)});o.ellipsisBtn.addEventListener("click",s=>{o.popoverPanel.classList.toggle("-opened")});o.deleteBtn.addEventListener("click",async()=>{await ft.action("„Åì„ÅÆ„Éó„É¨„Ç§„É™„Çπ„Éà„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü",[{text:"„Éó„É¨„Ç§„É™„Çπ„Éà„ÇíÂâäÈô§",value:"delete",type:"danger"}])==="delete"&&v.deletePlaylist(o.loadingPlaylistId()),o.hide();const t=await v.loadPlaylists();M.renderPlaylists(t)});o.root.addEventListener("scroll",()=>{const s=o.header.offsetHeight;o.title.getBoundingClientRect().top+o.title.offsetHeight<=s?o.headerTitle.style.visibility="visible":o.headerTitle.style.visibility="hidden"});o.addBtn.addEventListener("click",()=>{const s=v.getPlaylist(o.loadingPlaylistId()),t=Rt(b,s.songs);E.renderSongs(t,v),E.show()});o.editBtn.addEventListener("click",()=>{const t=v.getPlaylist(o.loadingPlaylistId()).songs;w.renderSongs(t),w.show()});o.infoBtn.addEventListener("click",()=>{const s=v.getPlaylist(o.loadingPlaylistId());f.setup(s),f.show(),f.value===""&&f.saveBtn.classList.add("-disabled")});o.playBtn.addEventListener("click",async()=>{const s=o.loadingPlaylistId(),t=v.getPlaylist(s);c.currentPlaylistId===s&&c.getCurrentTrack()?c.togglePlay():(c.setPlaylist(t),await c.playTrack(0))});o.songList.addEventListener("click",s=>{const t=s.target.closest("li"),e=o.loadingPlaylistId(),i=v.getPlaylist(e),n=V(i.songs,t.dataset.title);c.setPlaylist(i),c.currentPlaylistId===e&&c.currentSongTitle===t.dataset.title?c.togglePlay():c.playTrack(n)});E.closeBtn.addEventListener("click",()=>{const s=o.loadingPlaylistId(),t=v.getPlaylist(s);o.init(t),E.hide()});E.searchInput.addEventListener("input",async()=>{const s=E.getSearchValue();E.filterList(s),s.trim()!==""?E.searchClearBtn.style.display="block":E.searchClearBtn.style.display="none"});E.searchClearBtn.addEventListener("click",async()=>{E.searchInput.value="",E.searchInput.focus(),E.searchClearBtn.style.display="none",E.filterList("")});w.closeBtn.addEventListener("click",async()=>{const s=o.loadingPlaylistId(),t=w.returnSongList();await v.setSongs(s,t);const e=v.getPlaylist(s);o.init(e),w.hide()});w.searchInput.addEventListener("input",()=>{const s=w.getSearchValue();w.filterList(s),s.trim()!==""?w.searchClearBtn.style.display="block":w.searchClearBtn.style.display="none"});w.searchClearBtn.addEventListener("click",()=>{w.searchInput.value="",w.searchInput.focus(),w.searchClearBtn.style.display="none",w.filterList("")});f.closeBtn.addEventListener("click",async()=>{await ft.action("„Éó„É¨„Ç§„É™„Çπ„Éà„Å´Âä†„Åà„ÅüÂ§âÊõ¥„ÇíÁ†¥Ê£Ñ„Åó„Åæ„Åô„ÅãÔºü",[{text:"Â§âÊõ¥„ÇíÁ†¥Ê£Ñ",value:"discard",type:"danger"}])==="discard"&&f.hide(),f.saveBtn.classList.remove("-disabled")});f.saveBtn.addEventListener("click",async()=>{const s=o.loadingPlaylistId(),t=v.getPlaylist(s),e=f.getImgFile();e&&await v.setImage(s,e),await v.renamePlaylist(s,f.nameInput.value),o.init(t),f.hide()});f.cameraBtn.addEventListener("click",()=>{f.popoverPanel.classList.toggle("-opened")});f.imgInputTrigger.addEventListener("click",()=>{f.imgInput.click()});f.imgInput.addEventListener("change",async s=>{const t=s.target.files[0],e=await Wt(t);f.img.src=e});f.nameInput.addEventListener("input",()=>{f.nameInput.value===""?f.saveBtn.classList.add("-disabled"):f.saveBtn.classList.remove("-disabled")});$.root.addEventListener("click",()=>{g.open(),$.hide()});$.playBtn.addEventListener("click",s=>{s.stopPropagation(),c.togglePlay()});g.closeBtn.addEventListener("click",()=>{g.close(),$.show()});g.progressBar.addEventListener("touchstart",()=>{g.isDragging=!0,g.expansion()});g.progressBar.addEventListener("input",()=>{g.updateWhileDragging(),g.updateProgressColor()});g.progressBar.addEventListener("change",()=>{c.seek(g.getProgressValue())});g.progressBar.addEventListener("touchend",()=>{g.isDragging=!1,g.reduction()});g.prevBtn.addEventListener("click",()=>{c.previous()});g.playBtn.addEventListener("click",()=>{c.togglePlay()});g.nextBtn.addEventListener("click",()=>{c.next()});ut.forEach(s=>{s.addEventListener("click",()=>{const t=s.getAttribute("data-target");ut.forEach(e=>e.classList.remove("active")),s.classList.add("active"),re.forEach(e=>{e.classList.toggle("active",e.id===t)})})});async function le(){b=await U.loadSongs(),p.renderSongList(b,U);const s=await v.loadPlaylists();M.renderPlaylists(s)}le();export{ot as E,yt as W,qt as b};
